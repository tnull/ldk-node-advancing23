<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The top-level channel management and payment tracking stuff lives here."><meta name="keywords" content="rust, rustlang, rust-lang, channelmanager"><title>lightning::ln::channelmanager - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../lightning/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../lightning/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module channelmanager</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../lightning/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../../index.html">lightning</a>::<wbr><a href="../index.html">ln</a>::<wbr><a class="mod" href="#">channelmanager</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/lightning/ln/channelmanager.rs.html#10-8629">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The top-level channel management and payment tracking stuff lives here.</p>
<p>The ChannelManager is the main chunk of logic implementing the lightning protocol and is
responsible for tracking which channels are open, HTLCs are in flight and reestablishing those
upon reconnect to the relevant peer(s).</p>
<p>It does not manage routing logic (see <a href="../../routing/router/fn.find_route.html"><code>find_route</code></a> for that) nor does it manage constructing
on-chain transactions (it only monitors the chain to watch for any force-closes that might
imply it needs to fail HTLCs/payments/channels it manages).</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ChainParameters.html" title="lightning::ln::channelmanager::ChainParameters struct">ChainParameters</a></div><div class="item-right docblock-short">Chain-related parameters used to construct a new <code>ChannelManager</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ChannelCounterparty.html" title="lightning::ln::channelmanager::ChannelCounterparty struct">ChannelCounterparty</a></div><div class="item-right docblock-short">Channel parameters which apply to our counterparty. These are split out from <a href="struct.ChannelDetails.html" title="ChannelDetails"><code>ChannelDetails</code></a>
to better separate parameters.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ChannelDetails.html" title="lightning::ln::channelmanager::ChannelDetails struct">ChannelDetails</a></div><div class="item-right docblock-short">Details of a channel, as returned by ChannelManager::list_channels and ChannelManager::list_usable_channels</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ChannelManager.html" title="lightning::ln::channelmanager::ChannelManager struct">ChannelManager</a></div><div class="item-right docblock-short">Manager which keeps track of a number of channels and sends messages to the appropriate
channel, also tracking HTLC preimages and forwarding onion packets appropriately.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ChannelManagerReadArgs.html" title="lightning::ln::channelmanager::ChannelManagerReadArgs struct">ChannelManagerReadArgs</a></div><div class="item-right docblock-short">Arguments for the creation of a ChannelManager that are not deserialized.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CounterpartyForwardingInfo.html" title="lightning::ln::channelmanager::CounterpartyForwardingInfo struct">CounterpartyForwardingInfo</a></div><div class="item-right docblock-short">Information needed for constructing an invoice route hint for this channel.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.InterceptId.html" title="lightning::ln::channelmanager::InterceptId struct">InterceptId</a></div><div class="item-right docblock-short">An identifier used to uniquely identify an intercepted HTLC to LDK.
(C-not exported) as we just use [u8; 32] directly</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PaymentId.html" title="lightning::ln::channelmanager::PaymentId struct">PaymentId</a></div><div class="item-right docblock-short">A payment identifier used to uniquely identify a payment to LDK.
(C-not exported) as we just use [u8; 32] directly</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.PhantomRouteHints.html" title="lightning::ln::channelmanager::PhantomRouteHints struct">PhantomRouteHints</a></div><div class="item-right docblock-short">Route hints used in constructing invoices for [phantom node payents].</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.FailureCode.html" title="lightning::ln::channelmanager::FailureCode enum">FailureCode</a></div><div class="item-right docblock-short">This enum is used to specify which error data to send to peers when failing back an HTLC
using <a href="struct.ChannelManager.html#method.fail_htlc_backwards_with_reason" title="ChannelManager::fail_htlc_backwards_with_reason"><code>ChannelManager::fail_htlc_backwards_with_reason</code></a>.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.PaymentSendFailure.html" title="lightning::ln::channelmanager::PaymentSendFailure enum">PaymentSendFailure</a></div><div class="item-right docblock-short">If a payment fails to send, it can be in one of several states. This enum is returned as the
Err() type describing which state the payment is in, see the description of individual enum
states for more.</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.BREAKDOWN_TIMEOUT.html" title="lightning::ln::channelmanager::BREAKDOWN_TIMEOUT constant">BREAKDOWN_TIMEOUT</a></div><div class="item-right docblock-short">The amount of time in blocks we require our counterparty wait to claim their money (ie time
between when we, or our watchtower, must check for them having broadcast a theft transaction).</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.MIN_CLTV_EXPIRY_DELTA.html" title="lightning::ln::channelmanager::MIN_CLTV_EXPIRY_DELTA constant">MIN_CLTV_EXPIRY_DELTA</a></div><div class="item-right docblock-short">The minimum number of blocks between an inbound HTLC’s CLTV and the corresponding outbound
HTLC’s CLTV. The current default represents roughly seven hours of blocks at six blocks/hour.</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.MIN_FINAL_CLTV_EXPIRY_DELTA.html" title="lightning::ln::channelmanager::MIN_FINAL_CLTV_EXPIRY_DELTA constant">MIN_FINAL_CLTV_EXPIRY_DELTA</a></div><div class="item-right docblock-short">Minimum CLTV difference between the current block height and received inbound payments.
Invoices generated for payment to us must set their <code>min_final_cltv_expiry_delta</code> field to at least
this value.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.provided_init_features.html" title="lightning::ln::channelmanager::provided_init_features fn">provided_init_features</a></div><div class="item-right docblock-short">Fetches the set of <a href="../features/type.InitFeatures.html" title="InitFeatures"><code>InitFeatures</code></a> flags which are provided by or required by
<a href="struct.ChannelManager.html" title="ChannelManager"><code>ChannelManager</code></a>.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.SimpleArcChannelManager.html" title="lightning::ln::channelmanager::SimpleArcChannelManager type">SimpleArcChannelManager</a></div><div class="item-right docblock-short">SimpleArcChannelManager is useful when you need a ChannelManager with a static lifetime, e.g.
when you’re using lightning-net-tokio (since tokio::spawn requires parameters with static
lifetimes). Other times you can afford a reference, which is more efficient, in which case
SimpleRefChannelManager is the more appropriate type. Defining these type aliases prevents
issues such as overly long function definitions. Note that the ChannelManager can take any type
that implements KeysInterface or Router for its keys manager and router, respectively, but this
type alias chooses the concrete types of KeysManager and DefaultRouter.</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.SimpleRefChannelManager.html" title="lightning::ln::channelmanager::SimpleRefChannelManager type">SimpleRefChannelManager</a></div><div class="item-right docblock-short">SimpleRefChannelManager is a type alias for a ChannelManager reference, and is the reference
counterpart to the SimpleArcChannelManager type alias. Use this type by default when you don’t
need a ChannelManager with a static lifetime. You’ll need a static lifetime in cases such as
usage of lightning-net-tokio (since tokio::spawn requires parameters with static lifetimes).
But if this is not necessary, using a reference is more efficient. Defining these type aliases
issues such as overly long function definitions. Note that the ChannelManager can take any type
that implements KeysInterface or Router for its keys manager and router, respectively, but this
type alias chooses the concrete types of KeysManager and DefaultRouter.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="lightning" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>