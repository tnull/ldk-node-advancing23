<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Manager which keeps track of a number of channels and sends messages to the appropriate channel, also tracking HTLC preimages and forwarding onion packets appropriately."><meta name="keywords" content="rust, rustlang, rust-lang, ChannelManager"><title>ChannelManager in lightning::ln::channelmanager - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../lightning/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../lightning/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">ChannelManager</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><ul><li><a href="#method.abandon_payment">abandon_payment</a></li><li><a href="#method.accept_inbound_channel">accept_inbound_channel</a></li><li><a href="#method.accept_inbound_channel_from_trusted_peer_0conf">accept_inbound_channel_from_trusted_peer_0conf</a></li><li><a href="#method.await_persistable_update">await_persistable_update</a></li><li><a href="#method.await_persistable_update_timeout">await_persistable_update_timeout</a></li><li><a href="#method.channel_features">channel_features</a></li><li><a href="#method.channel_type_features">channel_type_features</a></li><li><a href="#method.claim_funds">claim_funds</a></li><li><a href="#method.close_channel">close_channel</a></li><li><a href="#method.close_channel_with_target_feerate">close_channel_with_target_feerate</a></li><li><a href="#method.compute_inflight_htlcs">compute_inflight_htlcs</a></li><li><a href="#method.create_channel">create_channel</a></li><li><a href="#method.create_inbound_payment">create_inbound_payment</a></li><li><a href="#method.create_inbound_payment_for_hash">create_inbound_payment_for_hash</a></li><li><a href="#method.create_inbound_payment_for_hash_legacy">create_inbound_payment_for_hash_legacy</a></li><li><a href="#method.create_inbound_payment_legacy">create_inbound_payment_legacy</a></li><li><a href="#method.current_best_block">current_best_block</a></li><li><a href="#method.fail_htlc_backwards">fail_htlc_backwards</a></li><li><a href="#method.fail_htlc_backwards_with_reason">fail_htlc_backwards_with_reason</a></li><li><a href="#method.fail_intercepted_htlc">fail_intercepted_htlc</a></li><li><a href="#method.force_close_all_channels_broadcasting_latest_txn">force_close_all_channels_broadcasting_latest_txn</a></li><li><a href="#method.force_close_all_channels_without_broadcasting_txn">force_close_all_channels_without_broadcasting_txn</a></li><li><a href="#method.force_close_broadcasting_latest_txn">force_close_broadcasting_latest_txn</a></li><li><a href="#method.force_close_without_broadcasting_txn">force_close_without_broadcasting_txn</a></li><li><a href="#method.forward_intercepted_htlc">forward_intercepted_htlc</a></li><li><a href="#method.funding_transaction_generated">funding_transaction_generated</a></li><li><a href="#method.get_current_default_configuration">get_current_default_configuration</a></li><li><a href="#method.get_intercept_scid">get_intercept_scid</a></li><li><a href="#method.get_our_node_id">get_our_node_id</a></li><li><a href="#method.get_payment_preimage">get_payment_preimage</a></li><li><a href="#method.get_persistable_update_future">get_persistable_update_future</a></li><li><a href="#method.get_phantom_route_hints">get_phantom_route_hints</a></li><li><a href="#method.get_phantom_scid">get_phantom_scid</a></li><li><a href="#method.init_features">init_features</a></li><li><a href="#method.list_channels">list_channels</a></li><li><a href="#method.list_usable_channels">list_usable_channels</a></li><li><a href="#method.new">new</a></li><li><a href="#method.node_features">node_features</a></li><li><a href="#method.process_pending_events_async">process_pending_events_async</a></li><li><a href="#method.process_pending_htlc_forwards">process_pending_htlc_forwards</a></li><li><a href="#method.retry_payment">retry_payment</a></li><li><a href="#method.send_payment">send_payment</a></li><li><a href="#method.send_payment_with_retry">send_payment_with_retry</a></li><li><a href="#method.send_probe">send_probe</a></li><li><a href="#method.send_spontaneous_payment">send_spontaneous_payment</a></li><li><a href="#method.timer_tick_occurred">timer_tick_occurred</a></li><li><a href="#method.update_channel_config">update_channel_config</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><ul><li><a href="#impl-ChannelMessageHandler-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">ChannelMessageHandler</a></li><li><a href="#impl-Confirm-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Confirm</a></li><li><a href="#impl-EventsProvider-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">EventsProvider</a></li><li><a href="#impl-Listen-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Listen</a></li><li><a href="#impl-MessageSendEventsProvider-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">MessageSendEventsProvider</a></li><li><a href="#impl-Writeable-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Writeable</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul><li><a href="#impl-RefUnwindSafe-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">!RefUnwindSafe</a></li><li><a href="#impl-Send-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Send</a></li><li><a href="#impl-Sync-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Sync</a></li><li><a href="#impl-Unpin-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Unpin</a></li><li><a href="#impl-UnwindSafe-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">!UnwindSafe</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><ul><li><a href="#impl-Any-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">TryInto&lt;U&gt;</a></li><li><a href="#impl-VZip%3CV%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E">VZip&lt;V&gt;</a></li></ul></div></section><h2 class="location"><a href="index.html">In lightning::ln::channelmanager</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../lightning/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Struct <a href="../../index.html">lightning</a>::<wbr><a href="../index.html">ln</a>::<wbr><a href="index.html">channelmanager</a>::<wbr><a class="struct" href="#">ChannelManager</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/lightning/ln/channelmanager.rs.html#619-800">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust struct"><code>pub struct ChannelManager&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span>{ /* private fields */ }</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Manager which keeps track of a number of channels and sends messages to the appropriate
channel, also tracking HTLC preimages and forwarding onion packets appropriately.</p>
<p>Implements ChannelMessageHandler, handling the multi-channel parts and passing things through
to individual Channels.</p>
<p>Implements Writeable to write out all channel state to disk. Implies peer_disconnected() for
all peers during write/read (though does not modify this instance, only the instance being
serialized). This will result in any channels which have not yet exchanged funding_created (ie
called funding_transaction_generated for outbound channels).</p>
<p>Note that you can be a bit lazier about writing out ChannelManager than you can be with
ChannelMonitors. With ChannelMonitors you MUST write each monitor update out to disk before
returning from chain::Watch::watch_/update_channel, with ChannelManagers, writing updates
happens out-of-band (and will prevent any other ChannelManager operations from occurring during
the serialization process). If the deserialized version is out-of-date compared to the
ChannelMonitors passed by reference to read(), those channels will be force-closed based on the
ChannelMonitor state and no funds will be lost (mod on-chain transaction fees).</p>
<p>Note that the deserializer is only implemented for (BlockHash, ChannelManager), which
tells you the last block hash which was block_connect()ed. You MUST rescan any blocks along
the “reorg path” (ie call block_disconnected() until you get to a common block and then call
block_connected() to step towards your best block) upon deserialization before using the
object!</p>
<p>Note that ChannelManager is responsible for tracking liveness of its channels and generating
ChannelUpdate messages informing peers that the channel is temporarily disabled. To avoid
spam due to quick disconnection/reconnection, updates are not sent until the channel has been
offline for a full minute. In order to track this, you must call
timer_tick_occurred roughly once per minute, though it doesn’t have to be perfect.</p>
<p>Rather than using a plain ChannelManager, it is preferable to use either a SimpleArcChannelManager
a SimpleRefChannelManager, for conciseness. See their documentation for more details, but
essentially you should default to using a SimpleRefChannelManager, and use a
SimpleArcChannelManager when you require a ChannelManager with a static lifetime, such as when
you’re using lightning-net-tokio.</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1431-5571">source</a><a href="#impl-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1452-1499">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;fee_est: F,<br>&nbsp;&nbsp;&nbsp;&nbsp;chain_monitor: M,<br>&nbsp;&nbsp;&nbsp;&nbsp;tx_broadcaster: T,<br>&nbsp;&nbsp;&nbsp;&nbsp;router: R,<br>&nbsp;&nbsp;&nbsp;&nbsp;logger: L,<br>&nbsp;&nbsp;&nbsp;&nbsp;entropy_source: ES,<br>&nbsp;&nbsp;&nbsp;&nbsp;node_signer: NS,<br>&nbsp;&nbsp;&nbsp;&nbsp;signer_provider: SP,<br>&nbsp;&nbsp;&nbsp;&nbsp;config: <a class="struct" href="../../util/config/struct.UserConfig.html" title="struct lightning::util::config::UserConfig">UserConfig</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;params: <a class="struct" href="struct.ChainParameters.html" title="struct lightning::ln::channelmanager::ChainParameters">ChainParameters</a><br>) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new ChannelManager to hold several channels and route between them.</p>
<p>This is the main “logic hub” for all channel-related actions, and implements
ChannelMessageHandler.</p>
<p>Non-proportional fees are fixed according to our risk using the provided fee estimator.</p>
<p>Users need to notify the new ChannelManager when a new block is connected or
disconnected using its <code>block_connected</code> and <code>block_disconnected</code> methods, starting
from after <code>params.latest_hash</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_current_default_configuration" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1502-1504">source</a><h4 class="code-header">pub fn <a href="#method.get_current_default_configuration" class="fnname">get_current_default_configuration</a>(&amp;self) -&gt; &amp;<a class="struct" href="../../util/config/struct.UserConfig.html" title="struct lightning::util::config::UserConfig">UserConfig</a></h4></section></summary><div class="docblock"><p>Gets the current configuration applied to all new channels.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_channel" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1550-1601">source</a><h4 class="code-header">pub fn <a href="#method.create_channel" class="fnname">create_channel</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;their_network_key: <a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;channel_value_satoshis: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;push_msat: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;user_channel_id: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u128.html">u128</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;override_config: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../util/config/struct.UserConfig.html" title="struct lightning::util::config::UserConfig">UserConfig</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Creates a new outbound channel to the given remote node and with the given value.</p>
<p><code>user_channel_id</code> will be provided back as in
<a href="../../util/events/enum.Event.html#variant.FundingGenerationReady.field.user_channel_id"><code>Event::FundingGenerationReady::user_channel_id</code></a> to allow tracking of which events
correspond with which <code>create_channel</code> call. Note that the <code>user_channel_id</code> defaults to a
randomized value for inbound channels. <code>user_channel_id</code> has no meaning inside of LDK, it
is simply copied to events and otherwise ignored.</p>
<p>Raises <a href="../../util/errors/enum.APIError.html#variant.APIMisuseError" title="APIError::APIMisuseError"><code>APIError::APIMisuseError</code></a> when <code>channel_value_satoshis</code> &gt; 2**24 or <code>push_msat</code> is
greater than <code>channel_value_satoshis * 1k</code> or <code>channel_value_satoshis &lt; 1000</code>.</p>
<p>Note that we do not check if you are currently connected to the given peer. If no
connection is available, the outbound <code>open_channel</code> message may fail to send, resulting in
the channel eventually being silently forgotten (dropped on reload).</p>
<p>Returns the new Channel’s temporary <code>channel_id</code>. This ID will appear as
<a href="../../util/events/enum.Event.html#variant.FundingGenerationReady.field.temporary_channel_id"><code>Event::FundingGenerationReady::temporary_channel_id</code></a> and in
<a href="struct.ChannelDetails.html#structfield.channel_id" title="ChannelDetails::channel_id"><code>ChannelDetails::channel_id</code></a> until after
<a href="struct.ChannelManager.html#method.funding_transaction_generated" title="ChannelManager::funding_transaction_generated"><code>ChannelManager::funding_transaction_generated</code></a> is called, swapping the Channel’s ID for
one derived from the funding transaction’s TXID. If the counterparty rejects the channel
immediately, this temporary ID will appear in <a href="../../util/events/enum.Event.html#variant.ChannelReady.field.channel_id"><code>Event::ChannelClosed::channel_id</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.list_channels" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1671-1673">source</a><h4 class="code-header">pub fn <a href="#method.list_channels" class="fnname">list_channels</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.ChannelDetails.html" title="struct lightning::ln::channelmanager::ChannelDetails">ChannelDetails</a>&gt;<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;</span><code class="content"><span class="where fmt-newline">impl&lt;A&gt; <a class="trait" href="../../io/trait.Write.html" title="trait lightning::io::Write">Write</a> for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;A: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/alloc/trait.Allocator.html" title="trait core::alloc::Allocator">Allocator</a>,</span></span></code></span></span></span></span></h4></section></summary><div class="docblock"><p>Gets the list of open channels, in random order. See ChannelDetail field documentation for
more information.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.list_usable_channels" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1683-1688">source</a><h4 class="code-header">pub fn <a href="#method.list_usable_channels" class="fnname">list_usable_channels</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="struct.ChannelDetails.html" title="struct lightning::ln::channelmanager::ChannelDetails">ChannelDetails</a>&gt;<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;</span><code class="content"><span class="where fmt-newline">impl&lt;A&gt; <a class="trait" href="../../io/trait.Write.html" title="trait lightning::io::Write">Write</a> for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;A: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/alloc/trait.Allocator.html" title="trait core::alloc::Allocator">Allocator</a>,</span></span></code></span></span></span></span></h4></section></summary><div class="docblock"><p>Gets the list of usable channels, in random order. Useful as an argument to <a href="../../routing/router/fn.find_route.html"><code>find_route</code></a>
to ensure non-announced channels are used.</p>
<p>These are guaranteed to have their <a href="struct.ChannelDetails.html#structfield.is_usable" title="ChannelDetails::is_usable"><code>ChannelDetails::is_usable</code></a> value set to true, see the
documentation for <a href="struct.ChannelDetails.html#structfield.is_usable" title="ChannelDetails::is_usable"><code>ChannelDetails::is_usable</code></a> for more info on exactly what the criteria
are.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.close_channel" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1783-1785">source</a><h4 class="code-header">pub fn <a href="#method.close_channel" class="fnname">close_channel</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Begins the process of closing a channel. After this call (plus some timeout), no new HTLCs
will be accepted on the given channel, and after additional timeout/the closing of all
pending HTLCs, the channel will be closed on chain.</p>
<ul>
<li>If we are the channel initiator, we will pay between our <a href="../../chain/chaininterface/enum.ConfirmationTarget.html#variant.Background"><code>Background</code></a> and
<a href="../../util/config/struct.ChannelConfig.html#structfield.force_close_avoidance_max_fee_satoshis"><code>ChannelConfig::force_close_avoidance_max_fee_satoshis</code></a> plus our <a href="../../chain/chaininterface/enum.ConfirmationTarget.html#variant.Normal"><code>Normal</code></a> fee
estimate.</li>
<li>If our counterparty is the channel initiator, we will require a channel closing
transaction feerate of at least our <a href="../../chain/chaininterface/enum.ConfirmationTarget.html#variant.Background"><code>Background</code></a> feerate or the feerate which
would appear on a force-closure transaction, whichever is lower. We will allow our
counterparty to pay as much fee as they’d like, however.</li>
</ul>
<p>May generate a SendShutdown message event on success, which should be relayed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.close_channel_with_target_feerate" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1806-1808">source</a><h4 class="code-header">pub fn <a href="#method.close_channel_with_target_feerate" class="fnname">close_channel_with_target_feerate</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;target_feerate_sats_per_1000_weight: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Begins the process of closing a channel. After this call (plus some timeout), no new HTLCs
will be accepted on the given channel, and after additional timeout/the closing of all
pending HTLCs, the channel will be closed on chain.</p>
<p><code>target_feerate_sat_per_1000_weight</code> has different meanings depending on if we initiated
the channel being closed or not:</p>
<ul>
<li>If we are the channel initiator, we will pay at least this feerate on the closing
transaction. The upper-bound is set by
<a href="../../util/config/struct.ChannelConfig.html#structfield.force_close_avoidance_max_fee_satoshis"><code>ChannelConfig::force_close_avoidance_max_fee_satoshis</code></a> plus our <a href="../../chain/chaininterface/enum.ConfirmationTarget.html#variant.Normal"><code>Normal</code></a> fee
estimate (or <code>target_feerate_sat_per_1000_weight</code>, if it is greater).</li>
<li>If our counterparty is the channel initiator, we will refuse to accept a channel closure
transaction feerate below <code>target_feerate_sat_per_1000_weight</code> (or the feerate which
will appear on a force-closure transaction, whichever is lower).</li>
</ul>
<p>May generate a SendShutdown message event on success, which should be relayed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.force_close_broadcasting_latest_txn" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1890-1893">source</a><h4 class="code-header">pub fn <a href="#method.force_close_broadcasting_latest_txn" class="fnname">force_close_broadcasting_latest_txn</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Force closes a channel, immediately broadcasting the latest local transaction(s) and
rejecting new HTLCs on the given channel. Fails if <code>channel_id</code> is unknown to
the manager, or if the <code>counterparty_node_id</code> isn’t the counterparty of the corresponding
channel.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.force_close_without_broadcasting_txn" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1901-1904">source</a><h4 class="code-header">pub fn <a href="#method.force_close_without_broadcasting_txn" class="fnname">force_close_without_broadcasting_txn</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Force closes a channel, rejecting new HTLCs on the given channel but skips broadcasting
the latest local transaction(s). Fails if <code>channel_id</code> is unknown to the manager, or if the
<code>counterparty_node_id</code> isn’t the counterparty of the corresponding channel.</p>
<p>You can always get the latest local transaction(s) to broadcast from
<a href="../../chain/channelmonitor/struct.ChannelMonitor.html#method.get_latest_holder_commitment_txn" title="ChannelMonitor::get_latest_holder_commitment_txn"><code>ChannelMonitor::get_latest_holder_commitment_txn</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.force_close_all_channels_broadcasting_latest_txn" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1908-1912">source</a><h4 class="code-header">pub fn <a href="#method.force_close_all_channels_broadcasting_latest_txn" class="fnname">force_close_all_channels_broadcasting_latest_txn</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Force close all channels, immediately broadcasting the latest local commitment transaction
for each to the chain and rejecting new HTLCs on each.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.force_close_all_channels_without_broadcasting_txn" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#1916-1920">source</a><h4 class="code-header">pub fn <a href="#method.force_close_all_channels_without_broadcasting_txn" class="fnname">force_close_all_channels_without_broadcasting_txn</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Force close all channels rejecting new HTLCs on each but without broadcasting the latest
local transaction(s).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.send_payment" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2461-2467">source</a><h4 class="code-header">pub fn <a href="#method.send_payment" class="fnname">send_payment</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;route: &amp;<a class="struct" href="../../routing/router/struct.Route.html" title="struct lightning::routing::router::Route">Route</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_hash: <a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_secret: &amp;<a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.PaymentSecret.html" title="struct lightning::ln::PaymentSecret">PaymentSecret</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_id: <a class="struct" href="struct.PaymentId.html" title="struct lightning::ln::channelmanager::PaymentId">PaymentId</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="enum.PaymentSendFailure.html" title="enum lightning::ln::channelmanager::PaymentSendFailure">PaymentSendFailure</a>&gt;</h4></section></summary><div class="docblock"><p>Sends a payment along a given route.</p>
<p>Value parameters are provided via the last hop in route, see documentation for RouteHop
fields for more info.</p>
<p>If a pending payment is currently in-flight with the same <a href="struct.PaymentId.html" title="PaymentId"><code>PaymentId</code></a> provided, this
method will error with an <a href="../../util/errors/enum.APIError.html#variant.InvalidRoute" title="APIError::InvalidRoute"><code>APIError::InvalidRoute</code></a>. Note, however, that once a payment
is no longer pending (either via <a href="struct.ChannelManager.html#method.abandon_payment" title="ChannelManager::abandon_payment"><code>ChannelManager::abandon_payment</code></a>, or handling of an
<a href="../../util/events/enum.Event.html#variant.PaymentSent"><code>Event::PaymentSent</code></a>) LDK will not stop you from sending a second payment with the same
<a href="struct.PaymentId.html" title="PaymentId"><code>PaymentId</code></a>.</p>
<p>Thus, in order to ensure duplicate payments are not sent, you should implement your own
tracking of payments, including state to indicate once a payment has completed. Because you
should also ensure that <a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a>es are not re-used, for simplicity, you should
consider using the <a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a> as the key for tracking payments. In that case, the
<a href="struct.PaymentId.html" title="PaymentId"><code>PaymentId</code></a> should be a copy of the <a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a> bytes.</p>
<p>May generate SendHTLCs message(s) event on success, which should be relayed (e.g. via
<a href="../peer_handler/struct.PeerManager.html#method.process_events"><code>PeerManager::process_events</code></a>).</p>
<p>Each path may have a different return value, and PaymentSendValue may return a Vec with
each entry matching the corresponding-index entry in the route paths, see
PaymentSendFailure for more info.</p>
<p>In general, a path may raise:</p>
<ul>
<li><a href="../../util/errors/enum.APIError.html#variant.InvalidRoute" title="APIError::InvalidRoute"><code>APIError::InvalidRoute</code></a> when an invalid route or forwarding parameter (cltv_delta, fee,
node public key) is specified.</li>
<li><a href="../../util/errors/enum.APIError.html#variant.ChannelUnavailable" title="APIError::ChannelUnavailable"><code>APIError::ChannelUnavailable</code></a> if the next-hop channel is not available for updates
(including due to previous monitor update failure or new permanent monitor update
failure).</li>
<li><a href="../../util/errors/enum.APIError.html#variant.MonitorUpdateInProgress" title="APIError::MonitorUpdateInProgress"><code>APIError::MonitorUpdateInProgress</code></a> if a new monitor update failure prevented sending the
relevant updates.</li>
</ul>
<p>Note that depending on the type of the PaymentSendFailure the HTLC may have been
irrevocably committed to on our end. In such a case, do NOT retry the payment with a
different route unless you intend to pay twice!</p>
<p>payment_secret is unrelated to payment_hash (or PaymentPreimage) and exists to authenticate
the sender to the recipient and prevent payment-probing (deanonymization) attacks. For
newer nodes, it will be provided to you in the invoice. If you do not have one, the Route
must not contain multiple paths as multi-path payments require a recipient-provided
payment_secret.</p>
<p>If a payment_secret <em>is</em> provided, we assume that the invoice had the payment_secret feature
bit set (either as required or as available). If multiple paths are present in the Route,
we assume the invoice had the basic_mpp feature set.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.send_payment_with_retry" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2471-2479">source</a><h4 class="code-header">pub fn <a href="#method.send_payment_with_retry" class="fnname">send_payment_with_retry</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_hash: <a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_secret: &amp;<a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.PaymentSecret.html" title="struct lightning::ln::PaymentSecret">PaymentSecret</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_id: <a class="struct" href="struct.PaymentId.html" title="struct lightning::ln::channelmanager::PaymentId">PaymentId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;route_params: <a class="struct" href="../../routing/router/struct.RouteParameters.html" title="struct lightning::routing::router::RouteParameters">RouteParameters</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;retry_strategy: Retry<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="enum.PaymentSendFailure.html" title="enum lightning::ln::channelmanager::PaymentSendFailure">PaymentSendFailure</a>&gt;</h4></section></summary><div class="docblock"><p>Similar to <a href="struct.ChannelManager.html#method.send_payment" title="ChannelManager::send_payment"><code>ChannelManager::send_payment</code></a>, but will automatically find a route based on
<code>route_params</code> and retry failed payment paths based on <code>retry_strategy</code>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.retry_payment" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2506-2511">source</a><h4 class="code-header">pub fn <a href="#method.retry_payment" class="fnname">retry_payment</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;route: &amp;<a class="struct" href="../../routing/router/struct.Route.html" title="struct lightning::routing::router::Route">Route</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_id: <a class="struct" href="struct.PaymentId.html" title="struct lightning::ln::channelmanager::PaymentId">PaymentId</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="enum.PaymentSendFailure.html" title="enum lightning::ln::channelmanager::PaymentSendFailure">PaymentSendFailure</a>&gt;</h4></section></summary><div class="docblock"><p>Retries a payment along the given <a href="../../routing/router/struct.Route.html" title="Route"><code>Route</code></a>.</p>
<p>Errors returned are a superset of those returned from <a href="%5B%60ChannelManager::send_payment%60%5D"><code>send_payment</code></a>, so see
<a href="%5B%60ChannelManager::send_payment%60%5D"><code>send_payment</code></a> documentation for more details on errors. This method will also error if the
retry amount puts the payment more than 10% over the payment’s total amount, if the payment
for the given <code>payment_id</code> cannot be found (likely due to timeout or success), or if
further retries have been disabled with <a href="%5B%60ChannelManager::abandon_payment%60%5D"><code>abandon_payment</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.abandon_payment" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2533-2538">source</a><h4 class="code-header">pub fn <a href="#method.abandon_payment" class="fnname">abandon_payment</a>(&amp;self, payment_id: <a class="struct" href="struct.PaymentId.html" title="struct lightning::ln::channelmanager::PaymentId">PaymentId</a>)</h4></section></summary><div class="docblock"><p>Signals that no further retries for the given payment will occur.</p>
<p>After this method returns, no future calls to <a href="struct.ChannelManager.html#method.retry_payment"><code>retry_payment</code></a> for the given <code>payment_id</code>
are allowed. If no <a href="../../util/events/enum.Event.html#variant.PaymentFailed"><code>Event::PaymentFailed</code></a> event had been generated before, one will be
generated as soon as there are no remaining pending HTLCs for this payment.</p>
<p>Note that calling this method does <em>not</em> prevent a payment from succeeding. You must still
wait until you receive either a <a href="../../util/events/enum.Event.html#variant.PaymentFailed"><code>Event::PaymentFailed</code></a> or <a href="../../util/events/enum.Event.html#variant.PaymentSent"><code>Event::PaymentSent</code></a> event to
determine the ultimate status of a payment.</p>
<p>If an <a href="../../util/events/enum.Event.html#variant.PaymentFailed"><code>Event::PaymentFailed</code></a> event is generated and we restart without this
<a href="struct.ChannelManager.html" title="ChannelManager"><code>ChannelManager</code></a> having been persisted, the payment may still be in the pending state
upon restart. This allows further calls to <a href="struct.ChannelManager.html#method.retry_payment"><code>retry_payment</code></a> (and requiring a second call
to <a href="struct.ChannelManager.html#method.abandon_payment"><code>abandon_payment</code></a> to mark the payment as failed again). Otherwise, future calls to
<a href="struct.ChannelManager.html#method.retry_payment"><code>retry_payment</code></a> will fail with <a href="enum.PaymentSendFailure.html#variant.ParameterError" title="PaymentSendFailure::ParameterError"><code>PaymentSendFailure::ParameterError</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.send_spontaneous_payment" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2555-2560">source</a><h4 class="code-header">pub fn <a href="#method.send_spontaneous_payment" class="fnname">send_spontaneous_payment</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;route: &amp;<a class="struct" href="../../routing/router/struct.Route.html" title="struct lightning::routing::router::Route">Route</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_preimage: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../struct.PaymentPreimage.html" title="struct lightning::ln::PaymentPreimage">PaymentPreimage</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_id: <a class="struct" href="struct.PaymentId.html" title="struct lightning::ln::channelmanager::PaymentId">PaymentId</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>, <a class="enum" href="enum.PaymentSendFailure.html" title="enum lightning::ln::channelmanager::PaymentSendFailure">PaymentSendFailure</a>&gt;</h4></section></summary><div class="docblock"><p>Send a spontaneous payment, which is a payment that does not require the recipient to have
generated an invoice. Optionally, you may specify the preimage. If you do choose to specify
the preimage, it must be a cryptographically secure random value that no intermediate node
would be able to guess – otherwise, an intermediate node may claim the payment and it will
never reach the recipient.</p>
<p>See <a href="struct.ChannelManager.html#method.send_payment"><code>send_payment</code></a> documentation for more details on the return value of this function
and idempotency guarantees provided by the <a href="struct.PaymentId.html" title="PaymentId"><code>PaymentId</code></a> key.</p>
<p>Similar to regular payments, you MUST NOT reuse a <code>payment_preimage</code> value. See
<a href="struct.ChannelManager.html#method.send_payment"><code>send_payment</code></a> for more information about the risks of duplicate preimage usage.</p>
<p>Note that <code>route</code> must have exactly one path.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.send_probe" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2565-2570">source</a><h4 class="code-header">pub fn <a href="#method.send_probe" class="fnname">send_probe</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;hops: <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../routing/router/struct.RouteHop.html" title="struct lightning::routing::router::RouteHop">RouteHop</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>, <a class="struct" href="struct.PaymentId.html" title="struct lightning::ln::channelmanager::PaymentId">PaymentId</a>), <a class="enum" href="enum.PaymentSendFailure.html" title="enum lightning::ln::channelmanager::PaymentSendFailure">PaymentSendFailure</a>&gt;</h4></section></summary><div class="docblock"><p>Send a payment that is probing the given route for liquidity. We calculate the
<a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a> of probes based on a static secret and a random <a href="struct.PaymentId.html" title="PaymentId"><code>PaymentId</code></a>, which allows
us to easily discern them from real payments.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.funding_transaction_generated" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2673-2719">source</a><h4 class="code-header">pub fn <a href="#method.funding_transaction_generated" class="fnname">funding_transaction_generated</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;temporary_channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;funding_transaction: <a class="struct" href="../../../bitcoin/blockdata/transaction/struct.Transaction.html" title="struct bitcoin::blockdata::transaction::Transaction">Transaction</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Call this upon creation of a funding transaction for the given channel.</p>
<p>Returns an <a href="../../util/errors/enum.APIError.html#variant.APIMisuseError" title="APIError::APIMisuseError"><code>APIError::APIMisuseError</code></a> if the funding_transaction spent non-SegWit outputs
or if no output was found which matches the parameters in <a href="../../util/events/enum.Event.html#variant.FundingGenerationReady"><code>Event::FundingGenerationReady</code></a>.</p>
<p>Returns <a href="../../util/errors/enum.APIError.html#variant.APIMisuseError" title="APIError::APIMisuseError"><code>APIError::APIMisuseError</code></a> if the funding transaction is not final for propagation
across the p2p network.</p>
<p>Returns <a href="../../util/errors/enum.APIError.html#variant.ChannelUnavailable" title="APIError::ChannelUnavailable"><code>APIError::ChannelUnavailable</code></a> if a funding transaction has already been provided
for the channel or if the channel has been closed as indicated by <a href="../../util/events/enum.Event.html#variant.ChannelClosed"><code>Event::ChannelClosed</code></a>.</p>
<p>May panic if the output found in the funding transaction is duplicative with some other
channel (note that this should be trivially prevented by using unique funding transaction
keys per-channel).</p>
<p>Do NOT broadcast the funding transaction yourself. When we have safely received our
counterparty’s signature the funding transaction will automatically be broadcast via the
<a href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="BroadcasterInterface"><code>BroadcasterInterface</code></a> provided when this <code>ChannelManager</code> was constructed.</p>
<p>Note that this includes RBF or similar transaction replacement strategies - lightning does
not currently support replacing a funding transaction on an existing channel. Instead,
create a new channel with a conflicting funding transaction.</p>
<p>Note to keep the miner incentives aligned in moving the blockchain forward, we recommend
the wallet software generating the funding transaction to apply anti-fee sniping as
implemented by Bitcoin Core wallet. See <a href="https://bitcoinops.org/en/topics/fee-sniping/">https://bitcoinops.org/en/topics/fee-sniping/</a>
for more details.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.update_channel_config" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2743-2784">source</a><h4 class="code-header">pub fn <a href="#method.update_channel_config" class="fnname">update_channel_config</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;channel_ids: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;config: &amp;<a class="struct" href="../../util/config/struct.ChannelConfig.html" title="struct lightning::util::config::ChannelConfig">ChannelConfig</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Atomically updates the <a href="../../util/config/struct.ChannelConfig.html" title="ChannelConfig"><code>ChannelConfig</code></a> for the given channels.</p>
<p>Once the updates are applied, each eligible channel (advertised with a known short channel
ID and a change in <a href="../../util/config/struct.ChannelConfig.html#structfield.forwarding_fee_proportional_millionths"><code>forwarding_fee_proportional_millionths</code></a>, <a href="../../util/config/struct.ChannelConfig.html#structfield.forwarding_fee_base_msat"><code>forwarding_fee_base_msat</code></a>,
or <a href="../../util/config/struct.ChannelConfig.html#structfield.cltv_expiry_delta"><code>cltv_expiry_delta</code></a>) has a <a href="../../util/events/enum.MessageSendEvent.html#variant.BroadcastChannelUpdate"><code>BroadcastChannelUpdate</code></a> event message generated
containing the new <a href="../msgs/struct.ChannelUpdate.html"><code>ChannelUpdate</code></a> message which should be broadcast to the network.</p>
<p>Returns <a href="../../util/errors/enum.APIError.html#variant.ChannelUnavailable"><code>ChannelUnavailable</code></a> when a channel is not found or an incorrect
<code>counterparty_node_id</code> is provided.</p>
<p>Returns <a href="../../util/errors/enum.APIError.html#variant.APIMisuseError"><code>APIMisuseError</code></a> when a <a href="../../util/config/struct.ChannelConfig.html#structfield.cltv_expiry_delta"><code>cltv_expiry_delta</code></a> update is to be applied with a value
below <a href="constant.MIN_CLTV_EXPIRY_DELTA.html" title="MIN_CLTV_EXPIRY_DELTA"><code>MIN_CLTV_EXPIRY_DELTA</code></a>.</p>
<p>If an error is returned, none of the updates should be considered applied.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.forward_intercepted_htlc" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2808-2857">source</a><h4 class="code-header">pub fn <a href="#method.forward_intercepted_htlc" class="fnname">forward_intercepted_htlc</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;intercept_id: <a class="struct" href="struct.InterceptId.html" title="struct lightning::ln::channelmanager::InterceptId">InterceptId</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;next_hop_channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;next_node_id: <a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;amt_to_forward_msat: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Attempts to forward an intercepted HTLC over the provided channel id and with the provided
amount to forward. Should only be called in response to an <a href="../../util/events/enum.Event.html#variant.HTLCIntercepted"><code>HTLCIntercepted</code></a> event.</p>
<p>Intercepted HTLCs can be useful for Lightning Service Providers (LSPs) to open a just-in-time
channel to a receiving node if the node lacks sufficient inbound liquidity.</p>
<p>To make use of intercepted HTLCs, set <a href="../../util/config/struct.UserConfig.html#structfield.accept_intercept_htlcs"><code>UserConfig::accept_intercept_htlcs</code></a> and use
<a href="struct.ChannelManager.html#method.get_intercept_scid" title="ChannelManager::get_intercept_scid"><code>ChannelManager::get_intercept_scid</code></a> to generate short channel id(s) to put in the
receiver’s invoice route hints. These route hints will signal to LDK to generate an
<a href="../../util/events/enum.Event.html#variant.HTLCIntercepted"><code>HTLCIntercepted</code></a> event when it receives the forwarded HTLC, and this method or
<a href="struct.ChannelManager.html#method.fail_intercepted_htlc" title="ChannelManager::fail_intercepted_htlc"><code>ChannelManager::fail_intercepted_htlc</code></a> MUST be called in response to the event.</p>
<p>Note that LDK does not enforce fee requirements in <code>amt_to_forward_msat</code>, and will not stop
you from forwarding more than you received.</p>
<p>Errors if the event was not handled in time, in which case the HTLC was automatically failed
backwards.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fail_intercepted_htlc" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2866-2889">source</a><h4 class="code-header">pub fn <a href="#method.fail_intercepted_htlc" class="fnname">fail_intercepted_htlc</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;intercept_id: <a class="struct" href="struct.InterceptId.html" title="struct lightning::ln::channelmanager::InterceptId">InterceptId</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Fails the intercepted HTLC indicated by intercept_id. Should only be called in response to
an <a href="../../util/events/enum.Event.html#variant.HTLCIntercepted"><code>HTLCIntercepted</code></a> event. See <a href="struct.ChannelManager.html#method.forward_intercepted_htlc" title="ChannelManager::forward_intercepted_htlc"><code>ChannelManager::forward_intercepted_htlc</code></a>.</p>
<p>Errors if the event was not handled in time, in which case the HTLC was automatically failed
backwards.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.process_pending_htlc_forwards" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#2895-3315">source</a><h4 class="code-header">pub fn <a href="#method.process_pending_htlc_forwards" class="fnname">process_pending_htlc_forwards</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Processes HTLCs which are pending waiting on random forward delay.</p>
<p>Should only really ever be called in response to a PendingHTLCsForwardable event.
Will likely generate further events.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.timer_tick_occurred" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#3405-3507">source</a><h4 class="code-header">pub fn <a href="#method.timer_tick_occurred" class="fnname">timer_tick_occurred</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Performs actions which should happen on startup and roughly once per minute thereafter.</p>
<p>This currently includes:</p>
<ul>
<li>Increasing or decreasing the on-chain feerate estimates for our outbound channels,</li>
<li>Broadcasting <code>ChannelUpdate</code> messages if we’ve been disconnected from our peer for more
than a minute, informing the network that they should no longer attempt to route over
the channel.</li>
<li>Expiring a channel’s previous <code>ChannelConfig</code> if necessary to only allow forwarding HTLCs
with the current <code>ChannelConfig</code>.</li>
</ul>
<p>Note that this may cause reentrancy through <code>chain::Watch::update_channel</code> calls or feerate
estimate fetches.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fail_htlc_backwards" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#3522-3524">source</a><h4 class="code-header">pub fn <a href="#method.fail_htlc_backwards" class="fnname">fail_htlc_backwards</a>(&amp;self, payment_hash: &amp;<a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>)</h4></section></summary><div class="docblock"><p>Indicates that the preimage for payment_hash is unknown or the received amount is incorrect
after a PaymentClaimable event, failing the HTLC back to its origin and freeing resources
along the path (including in our own channel on which we received it).</p>
<p>Note that in some cases around unclean shutdown, it is possible the payment may have
already been claimed by you via <a href="struct.ChannelManager.html#method.claim_funds" title="ChannelManager::claim_funds"><code>ChannelManager::claim_funds</code></a> prior to you seeing (a
second copy of) the <a href="../../util/events/enum.Event.html#variant.PaymentClaimable" title="events::Event::PaymentClaimable"><code>events::Event::PaymentClaimable</code></a> event. Alternatively, the payment
may have already been failed automatically by LDK if it was nearing its expiration time.</p>
<p>While LDK will never claim a payment automatically on your behalf (i.e. without you calling
<a href="struct.ChannelManager.html#method.claim_funds" title="ChannelManager::claim_funds"><code>ChannelManager::claim_funds</code></a>), you should still monitor for
<a href="../../util/events/enum.Event.html#variant.PaymentClaimed" title="events::Event::PaymentClaimed"><code>events::Event::PaymentClaimed</code></a> events even for payments you intend to fail, especially on
startup during which time claims that were in-progress at shutdown may be replayed.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fail_htlc_backwards_with_reason" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#3530-3542">source</a><h4 class="code-header">pub fn <a href="#method.fail_htlc_backwards_with_reason" class="fnname">fail_htlc_backwards_with_reason</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_hash: &amp;<a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;failure_code: &amp;<a class="enum" href="enum.FailureCode.html" title="enum lightning::ln::channelmanager::FailureCode">FailureCode</a><br>)</h4></section></summary><div class="docblock"><p>This is a variant of <a href="struct.ChannelManager.html#method.fail_htlc_backwards" title="ChannelManager::fail_htlc_backwards"><code>ChannelManager::fail_htlc_backwards</code></a> that allows you to specify the
reason for the failure.</p>
<p>See <a href="enum.FailureCode.html" title="FailureCode"><code>FailureCode</code></a> for valid failure codes.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.claim_funds" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#3709-3851">source</a><h4 class="code-header">pub fn <a href="#method.claim_funds" class="fnname">claim_funds</a>(&amp;self, payment_preimage: <a class="struct" href="../struct.PaymentPreimage.html" title="struct lightning::ln::PaymentPreimage">PaymentPreimage</a>)</h4></section></summary><div class="docblock"><p>Provides a payment preimage in response to <a href="../../util/events/enum.Event.html#variant.PaymentClaimable"><code>Event::PaymentClaimable</code></a>, generating any
<a href="../../util/events/enum.MessageSendEvent.html" title="MessageSendEvent"><code>MessageSendEvent</code></a>s needed to claim the payment.</p>
<p>Note that calling this method does <em>not</em> guarantee that the payment has been claimed. You
<em>must</em> wait for an <a href="../../util/events/enum.Event.html#variant.PaymentClaimed"><code>Event::PaymentClaimed</code></a> event which upon a successful claim will be
provided to your <a href="../../util/events/trait.EventHandler.html" title="EventHandler"><code>EventHandler</code></a> when <a href="../../util/events/trait.EventsProvider.html#tymethod.process_pending_events"><code>process_pending_events</code></a> is next called.</p>
<p>Note that if you did not set an <code>amount_msat</code> when calling <a href="struct.ChannelManager.html#method.create_inbound_payment"><code>create_inbound_payment</code></a> or
<a href="struct.ChannelManager.html#method.create_inbound_payment_for_hash"><code>create_inbound_payment_for_hash</code></a> you must check that the amount in the <code>PaymentClaimable</code>
event matches your expectation. If you fail to do so and call this method, you may provide
the sender “proof-of-payment” when they did not fulfill the full expected payment.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_our_node_id" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#4012-4014">source</a><h4 class="code-header">pub fn <a href="#method.get_our_node_id" class="fnname">get_our_node_id</a>(&amp;self) -&gt; <a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a></h4></section></summary><div class="docblock"><p>Gets the node_id held by this ChannelManager</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.accept_inbound_channel" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#4177-4179">source</a><h4 class="code-header">pub fn <a href="#method.accept_inbound_channel" class="fnname">accept_inbound_channel</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;temporary_channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;user_channel_id: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u128.html">u128</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Accepts a request to open a channel after a <a href="../../util/events/enum.Event.html#variant.OpenChannelRequest"><code>Event::OpenChannelRequest</code></a>.</p>
<p>The <code>temporary_channel_id</code> parameter indicates which inbound channel should be accepted,
and the <code>counterparty_node_id</code> parameter is the id of the peer which has requested to open
the channel.</p>
<p>The <code>user_channel_id</code> parameter will be provided back in
<a href="../../util/events/enum.Event.html#variant.FundingGenerationReady.field.user_channel_id"><code>Event::ChannelClosed::user_channel_id</code></a> to allow tracking of which events correspond
with which <code>accept_inbound_channel</code>/<code>accept_inbound_channel_from_trusted_peer_0conf</code> call.</p>
<p>Note that this method will return an error and reject the channel, if it requires support
for zero confirmations. Instead, <code>accept_inbound_channel_from_trusted_peer_0conf</code> must be
used to accept such channels.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.accept_inbound_channel_from_trusted_peer_0conf" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#4199-4201">source</a><h4 class="code-header">pub fn <a href="#method.accept_inbound_channel_from_trusted_peer_0conf" class="fnname">accept_inbound_channel_from_trusted_peer_0conf</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;temporary_channel_id: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.array.html">; 32]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;user_channel_id: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u128.html">u128</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Accepts a request to open a channel after a <a href="../../util/events/enum.Event.html#variant.OpenChannelRequest" title="events::Event::OpenChannelRequest"><code>events::Event::OpenChannelRequest</code></a>, treating
it as confirmed immediately.</p>
<p>The <code>user_channel_id</code> parameter will be provided back in
<a href="../../util/events/enum.Event.html#variant.FundingGenerationReady.field.user_channel_id"><code>Event::ChannelClosed::user_channel_id</code></a> to allow tracking of which events correspond
with which <code>accept_inbound_channel</code>/<code>accept_inbound_channel_from_trusted_peer_0conf</code> call.</p>
<p>Unlike <a href="struct.ChannelManager.html#method.accept_inbound_channel" title="ChannelManager::accept_inbound_channel"><code>ChannelManager::accept_inbound_channel</code></a>, this method accepts the incoming channel
and (if the counterparty agrees), enables forwarding of payments immediately.</p>
<p>This fully trusts that the counterparty has honestly and correctly constructed the funding
transaction and blindly assumes that it will eventually confirm.</p>
<p>If it does not confirm before we decide to close the channel, or if the funding transaction
does not pay to the correct script the correct amount, <em>you will lose funds</em>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_inbound_payment" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5350-5355">source</a><h4 class="code-header">pub fn <a href="#method.create_inbound_payment" class="fnname">create_inbound_payment</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;min_value_msat: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;invoice_expiry_delta_secs: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;min_final_cltv_expiry_delta: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u16.html">u16</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>, <a class="struct" href="../struct.PaymentSecret.html" title="struct lightning::ln::PaymentSecret">PaymentSecret</a>), <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Gets a payment secret and payment hash for use in an invoice given to a third party wishing
to pay us.</p>
<p>This differs from <a href="struct.ChannelManager.html#method.create_inbound_payment_for_hash"><code>create_inbound_payment_for_hash</code></a> only in that it generates the
<a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a> and <a href="../struct.PaymentPreimage.html" title="PaymentPreimage"><code>PaymentPreimage</code></a> for you.</p>
<p>The <a href="../struct.PaymentPreimage.html" title="PaymentPreimage"><code>PaymentPreimage</code></a> will ultimately be returned to you in the <a href="../../util/events/enum.Event.html#variant.PaymentClaimable"><code>PaymentClaimable</code></a>, which
will have the <a href="../../util/events/enum.Event.html#variant.PaymentSent.field.payment_preimage"><code>PaymentClaimable::payment_preimage</code></a> field filled in. That should then be
passed directly to <a href="struct.ChannelManager.html#method.claim_funds"><code>claim_funds</code></a>.</p>
<p>See <a href="struct.ChannelManager.html#method.create_inbound_payment_for_hash"><code>create_inbound_payment_for_hash</code></a> for detailed documentation on behavior and requirements.</p>
<p>Note that a malicious eavesdropper can intuit whether an inbound payment was created by
<code>create_inbound_payment</code> or <code>create_inbound_payment_for_hash</code> based on runtime.</p>
<h5 id="note"><a href="#note">Note</a></h5>
<p>If you register an inbound payment with this method, then serialize the <code>ChannelManager</code>, then
deserialize it with a node running 0.0.103 and earlier, the payment will fail to be received.</p>
<p>Errors if <code>min_value_msat</code> is greater than total bitcoin supply.</p>
<p>If <code>min_final_cltv_expiry_delta</code> is set to some value, then the payment will not be receivable
on versions of LDK prior to 0.0.114.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_inbound_payment_legacy" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5367-5372">source</a><h4 class="code-header">pub fn <a href="#method.create_inbound_payment_legacy" class="fnname">create_inbound_payment_legacy</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;min_value_msat: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;invoice_expiry_delta_secs: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(<a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>, <a class="struct" href="../struct.PaymentSecret.html" title="struct lightning::ln::PaymentSecret">PaymentSecret</a>), <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated</span></div></span></summary><div class="docblock"><p>Legacy version of <a href="struct.ChannelManager.html#method.create_inbound_payment"><code>create_inbound_payment</code></a>. Use this method if you wish to share
serialized state with LDK node(s) running 0.0.103 and earlier.</p>
<p>May panic if <code>invoice_expiry_delta_secs</code> is greater than one year.</p>
<h5 id="note-1"><a href="#note-1">Note</a></h5>
<p>This method is deprecated and will be removed soon.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_inbound_payment_for_hash" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5420-5425">source</a><h4 class="code-header">pub fn <a href="#method.create_inbound_payment_for_hash" class="fnname">create_inbound_payment_for_hash</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_hash: <a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;min_value_msat: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;invoice_expiry_delta_secs: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;min_final_cltv_expiry: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u16.html">u16</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../struct.PaymentSecret.html" title="struct lightning::ln::PaymentSecret">PaymentSecret</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class="docblock"><p>Gets a <a href="../struct.PaymentSecret.html" title="PaymentSecret"><code>PaymentSecret</code></a> for a given <a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a>, for which the payment preimage is
stored external to LDK.</p>
<p>A <a href="../../util/events/enum.Event.html#variant.PaymentClaimable"><code>PaymentClaimable</code></a> event will only be generated if the <a href="../struct.PaymentSecret.html" title="PaymentSecret"><code>PaymentSecret</code></a> matches a
payment secret fetched via this method or <a href="struct.ChannelManager.html#method.create_inbound_payment"><code>create_inbound_payment</code></a>, and which is at least
the <code>min_value_msat</code> provided here, if one is provided.</p>
<p>The <a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a> (and corresponding <a href="../struct.PaymentPreimage.html" title="PaymentPreimage"><code>PaymentPreimage</code></a>) should be globally unique, though
note that LDK will not stop you from registering duplicate payment hashes for inbound
payments.</p>
<p><code>min_value_msat</code> should be set if the invoice being generated contains a value. Any payment
received for the returned <a href="../struct.PaymentHash.html" title="PaymentHash"><code>PaymentHash</code></a> will be required to be at least <code>min_value_msat</code>
before a <a href="../../util/events/enum.Event.html#variant.PaymentClaimable"><code>PaymentClaimable</code></a> event will be generated, ensuring that we do not provide the
sender “proof-of-payment” unless they have paid the required amount.</p>
<p><code>invoice_expiry_delta_secs</code> describes the number of seconds that the invoice is valid for
in excess of the current time. This should roughly match the expiry time set in the invoice.
After this many seconds, we will remove the inbound payment, resulting in any attempts to
pay the invoice failing. The BOLT spec suggests 3,600 secs as a default validity time for
invoices when no timeout is set.</p>
<p>Note that we use block header time to time-out pending inbound payments (with some margin
to compensate for the inaccuracy of block header timestamps). Thus, in practice we will
accept a payment and generate a <a href="../../util/events/enum.Event.html#variant.PaymentClaimable"><code>PaymentClaimable</code></a> event for some time after the expiry.
If you need exact expiry semantics, you should enforce them upon receipt of
<a href="../../util/events/enum.Event.html#variant.PaymentClaimable"><code>PaymentClaimable</code></a>.</p>
<p>Note that invoices generated for inbound payments should have their <code>min_final_cltv_expiry_delta</code>
set to at least <a href="constant.MIN_FINAL_CLTV_EXPIRY_DELTA.html" title="MIN_FINAL_CLTV_EXPIRY_DELTA"><code>MIN_FINAL_CLTV_EXPIRY_DELTA</code></a>.</p>
<p>Note that a malicious eavesdropper can intuit whether an inbound payment was created by
<code>create_inbound_payment</code> or <code>create_inbound_payment_for_hash</code> based on runtime.</p>
<h5 id="note-2"><a href="#note-2">Note</a></h5>
<p>If you register an inbound payment with this method, then serialize the <code>ChannelManager</code>, then
deserialize it with a node running 0.0.103 and earlier, the payment will fail to be received.</p>
<p>Errors if <code>min_value_msat</code> is greater than total bitcoin supply.</p>
<p>If <code>min_final_cltv_expiry_delta</code> is set to some value, then the payment will not be receivable
on versions of LDK prior to 0.0.114.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_inbound_payment_for_hash_legacy" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5437-5439">source</a><h4 class="code-header">pub fn <a href="#method.create_inbound_payment_for_hash_legacy" class="fnname">create_inbound_payment_for_hash_legacy</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_hash: <a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;min_value_msat: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;invoice_expiry_delta_secs: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../struct.PaymentSecret.html" title="struct lightning::ln::PaymentSecret">PaymentSecret</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section><span class="item-info"><div class="stab deprecated"><span class="emoji">👎</span><span>Deprecated</span></div></span></summary><div class="docblock"><p>Legacy version of <a href="struct.ChannelManager.html#method.create_inbound_payment_for_hash"><code>create_inbound_payment_for_hash</code></a>. Use this method if you wish to share
serialized state with LDK node(s) running 0.0.103 and earlier.</p>
<p>May panic if <code>invoice_expiry_delta_secs</code> is greater than one year.</p>
<h5 id="note-3"><a href="#note-3">Note</a></h5>
<p>This method is deprecated and will be removed soon.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_payment_preimage" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5445-5447">source</a><h4 class="code-header">pub fn <a href="#method.get_payment_preimage" class="fnname">get_payment_preimage</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_hash: <a class="struct" href="../struct.PaymentHash.html" title="struct lightning::ln::PaymentHash">PaymentHash</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;payment_secret: <a class="struct" href="../struct.PaymentSecret.html" title="struct lightning::ln::PaymentSecret">PaymentSecret</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../struct.PaymentPreimage.html" title="struct lightning::ln::PaymentPreimage">PaymentPreimage</a>, <a class="enum" href="../../util/errors/enum.APIError.html" title="enum lightning::util::errors::APIError">APIError</a>&gt;</h4></section></summary><div class="docblock"><p>Gets an LDK-generated payment preimage from a payment hash and payment secret that were
previously returned from <a href="struct.ChannelManager.html#method.create_inbound_payment"><code>create_inbound_payment</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_phantom_scid" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5453-5464">source</a><h4 class="code-header">pub fn <a href="#method.get_phantom_scid" class="fnname">get_phantom_scid</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a></h4></section></summary><div class="docblock"><p>Gets a fake short channel id for use in receiving <a href="../../chain/keysinterface/struct.PhantomKeysManager.html">phantom node payments</a>. These fake scids
are used when constructing the phantom invoice’s route hints.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_phantom_route_hints" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5469-5475">source</a><h4 class="code-header">pub fn <a href="#method.get_phantom_route_hints" class="fnname">get_phantom_route_hints</a>(&amp;self) -&gt; <a class="struct" href="struct.PhantomRouteHints.html" title="struct lightning::ln::channelmanager::PhantomRouteHints">PhantomRouteHints</a></h4></section></summary><div class="docblock"><p>Gets route hints for use in receiving <a href="../../chain/keysinterface/struct.PhantomKeysManager.html">phantom node payments</a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_intercept_scid" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5483-5492">source</a><h4 class="code-header">pub fn <a href="#method.get_intercept_scid" class="fnname">get_intercept_scid</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u64.html">u64</a></h4></section></summary><div class="docblock"><p>Gets a fake short channel id for use in receiving intercepted payments. These fake scids are
used when constructing the route hints for HTLCs intended to be intercepted. See
<a href="struct.ChannelManager.html#method.forward_intercepted_htlc" title="ChannelManager::forward_intercepted_htlc"><code>ChannelManager::forward_intercepted_htlc</code></a>.</p>
<p>Note that this method is not guaranteed to return unique values, you may need to call it a few
times to get a unique scid.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compute_inflight_htlcs" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5496-5513">source</a><h4 class="code-header">pub fn <a href="#method.compute_inflight_htlcs" class="fnname">compute_inflight_htlcs</a>(&amp;self) -&gt; <a class="struct" href="../../routing/router/struct.InFlightHtlcs.html" title="struct lightning::routing::router::InFlightHtlcs">InFlightHtlcs</a></h4></section></summary><div class="docblock"><p>Gets inflight HTLC information by processing pending outbound payments that are in
our channels. May be used during pathfinding to account for in-use channel liquidity.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.process_pending_events_async" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5543-5570">source</a><h4 class="code-header">pub async fn <a href="#method.process_pending_events_async" class="fnname">process_pending_events_async</a>&lt;Future:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>, H:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(<a class="enum" href="../../util/events/enum.Event.html" title="enum lightning::util::events::Event">Event</a>) -&gt; Future&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;handler: H<br>)</h4></section></summary><div class="docblock"><p>Processes any events asynchronously in the order they were generated since the last call
using the given event handler.</p>
<p>See the trait-level documentation of <a href="../../util/events/trait.EventsProvider.html" title="EventsProvider"><code>EventsProvider</code></a> for requirements.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E-1" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5809-6047">source</a><a href="#impl-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.await_persistable_update_timeout" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5982-5984">source</a><h4 class="code-header">pub fn <a href="#method.await_persistable_update_timeout" class="fnname">await_persistable_update_timeout</a>(&amp;self, max_wait: <a class="struct" href="https://doc.rust-lang.org/1.65.0/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Blocks until ChannelManager needs to be persisted or a timeout is reached. It returns a bool
indicating whether persistence is necessary. Only one listener on
<a href="struct.ChannelManager.html#method.await_persistable_update"><code>await_persistable_update</code></a>, <a href="struct.ChannelManager.html#method.await_persistable_update_timeout"><code>await_persistable_update_timeout</code></a>, or a future returned by
<a href="struct.ChannelManager.html#method.get_persistable_update_future"><code>get_persistable_update_future</code></a> is guaranteed to be woken up.</p>
<p>Note that this method is not available with the <code>no-std</code> feature.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.await_persistable_update" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5992-5994">source</a><h4 class="code-header">pub fn <a href="#method.await_persistable_update" class="fnname">await_persistable_update</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Blocks until ChannelManager needs to be persisted. Only one listener on
<a href="struct.ChannelManager.html#method.await_persistable_update"><code>await_persistable_update</code></a>, <code>await_persistable_update_timeout</code>, or a future returned by
<a href="struct.ChannelManager.html#method.get_persistable_update_future"><code>get_persistable_update_future</code></a> is guaranteed to be woken up.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_persistable_update_future" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5999-6001">source</a><h4 class="code-header">pub fn <a href="#method.get_persistable_update_future" class="fnname">get_persistable_update_future</a>(&amp;self) -&gt; <a class="struct" href="../../util/wakers/struct.Future.html" title="struct lightning::util::wakers::Future">Future</a><span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="../../util/wakers/struct.Future.html" title="struct lightning::util::wakers::Future">Future</a></span><code class="content"><span class="where fmt-newline">impl&lt;'a&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="../../util/wakers/struct.Future.html" title="struct lightning::util::wakers::Future">Future</a></span><span class="where fmt-newline">    type <a href="https://doc.rust-lang.org/1.65.0/core/future/future/trait.Future.html#associatedtype.Output" class="associatedtype">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>;</span></code></span></span></span></span></h4></section></summary><div class="docblock"><p>Gets a <a href="../../util/wakers/struct.Future.html" title="Future"><code>Future</code></a> that completes when a persistable update is available. Note that
callbacks registered on the <a href="../../util/wakers/struct.Future.html" title="Future"><code>Future</code></a> MUST NOT call back into this <a href="struct.ChannelManager.html" title="ChannelManager"><code>ChannelManager</code></a> and
should instead register actions to be taken later.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.current_best_block" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6010-6012">source</a><h4 class="code-header">pub fn <a href="#method.current_best_block" class="fnname">current_best_block</a>(&amp;self) -&gt; <a class="struct" href="../../chain/struct.BestBlock.html" title="struct lightning::chain::BestBlock">BestBlock</a></h4></section></summary><div class="docblock"><p>Gets the latest best block which was connected either via the <a href="../../chain/trait.Listen.html" title="chain::Listen"><code>chain::Listen</code></a> or
<a href="../../chain/trait.Confirm.html" title="chain::Confirm"><code>chain::Confirm</code></a> interfaces.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.node_features" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6016-6018">source</a><h4 class="code-header">pub fn <a href="#method.node_features" class="fnname">node_features</a>(&amp;self) -&gt; <a class="type" href="../features/type.NodeFeatures.html" title="type lightning::ln::features::NodeFeatures">NodeFeatures</a></h4></section></summary><div class="docblock"><p>Fetches the set of <a href="../features/type.NodeFeatures.html" title="NodeFeatures"><code>NodeFeatures</code></a> flags which are provided by or required by
<a href="struct.ChannelManager.html" title="ChannelManager"><code>ChannelManager</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.channel_features" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6032-6034">source</a><h4 class="code-header">pub fn <a href="#method.channel_features" class="fnname">channel_features</a>(&amp;self) -&gt; <a class="type" href="../features/type.ChannelFeatures.html" title="type lightning::ln::features::ChannelFeatures">ChannelFeatures</a></h4></section></summary><div class="docblock"><p>Fetches the set of <a href="../features/type.ChannelFeatures.html" title="ChannelFeatures"><code>ChannelFeatures</code></a> flags which are provided by or required by
<a href="struct.ChannelManager.html" title="ChannelManager"><code>ChannelManager</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.channel_type_features" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6038-6040">source</a><h4 class="code-header">pub fn <a href="#method.channel_type_features" class="fnname">channel_type_features</a>(&amp;self) -&gt; <a class="type" href="../features/type.ChannelTypeFeatures.html" title="type lightning::ln::features::ChannelTypeFeatures">ChannelTypeFeatures</a></h4></section></summary><div class="docblock"><p>Fetches the set of <a href="../features/type.ChannelTypeFeatures.html" title="ChannelTypeFeatures"><code>ChannelTypeFeatures</code></a> flags which are provided by or required by
<a href="struct.ChannelManager.html" title="ChannelManager"><code>ChannelManager</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.init_features" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6044-6046">source</a><h4 class="code-header">pub fn <a href="#method.init_features" class="fnname">init_features</a>(&amp;self) -&gt; <a class="type" href="../features/type.InitFeatures.html" title="type lightning::ln::features::InitFeatures">InitFeatures</a></h4></section></summary><div class="docblock"><p>Fetches the set of <a href="../features/type.InitFeatures.html" title="InitFeatures"><code>InitFeatures</code></a> flags which are provided by or required by
<a href="struct.ChannelManager.html" title="ChannelManager"><code>ChannelManager</code></a>.</p>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-ChannelMessageHandler-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6049-6322">source</a><a href="#impl-ChannelMessageHandler-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="trait" href="../msgs/trait.ChannelMessageHandler.html" title="trait lightning::ln::msgs::ChannelMessageHandler">ChannelMessageHandler</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_open_channel" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6061-6064">source</a><a href="#method.handle_open_channel" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_open_channel" class="fnname">handle_open_channel</a>(&amp;self, counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>, msg: &amp;<a class="struct" href="../msgs/struct.OpenChannel.html" title="struct lightning::ln::msgs::OpenChannel">OpenChannel</a>)</h4></section></summary><div class='docblock'>Handle an incoming <code>open_channel</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_accept_channel" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6066-6069">source</a><a href="#method.handle_accept_channel" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_accept_channel" class="fnname">handle_accept_channel</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.AcceptChannel.html" title="struct lightning::ln::msgs::AcceptChannel">AcceptChannel</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>accept_channel</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_funding_created" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6071-6074">source</a><a href="#method.handle_funding_created" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_funding_created" class="fnname">handle_funding_created</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.FundingCreated.html" title="struct lightning::ln::msgs::FundingCreated">FundingCreated</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>funding_created</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_funding_signed" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6076-6079">source</a><a href="#method.handle_funding_signed" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_funding_signed" class="fnname">handle_funding_signed</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.FundingSigned.html" title="struct lightning::ln::msgs::FundingSigned">FundingSigned</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>funding_signed</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_channel_ready" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6081-6084">source</a><a href="#method.handle_channel_ready" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_channel_ready" class="fnname">handle_channel_ready</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.ChannelReady.html" title="struct lightning::ln::msgs::ChannelReady">ChannelReady</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>channel_ready</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_shutdown" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6086-6089">source</a><a href="#method.handle_shutdown" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_shutdown" class="fnname">handle_shutdown</a>(&amp;self, counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>, msg: &amp;<a class="struct" href="../msgs/struct.Shutdown.html" title="struct lightning::ln::msgs::Shutdown">Shutdown</a>)</h4></section></summary><div class='docblock'>Handle an incoming <code>shutdown</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_closing_signed" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6091-6094">source</a><a href="#method.handle_closing_signed" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_closing_signed" class="fnname">handle_closing_signed</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.ClosingSigned.html" title="struct lightning::ln::msgs::ClosingSigned">ClosingSigned</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>closing_signed</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_update_add_htlc" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6096-6099">source</a><a href="#method.handle_update_add_htlc" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_update_add_htlc" class="fnname">handle_update_add_htlc</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.UpdateAddHTLC.html" title="struct lightning::ln::msgs::UpdateAddHTLC">UpdateAddHTLC</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>update_add_htlc</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_update_fulfill_htlc" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6101-6104">source</a><a href="#method.handle_update_fulfill_htlc" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_update_fulfill_htlc" class="fnname">handle_update_fulfill_htlc</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.UpdateFulfillHTLC.html" title="struct lightning::ln::msgs::UpdateFulfillHTLC">UpdateFulfillHTLC</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>update_fulfill_htlc</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_update_fail_htlc" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6106-6109">source</a><a href="#method.handle_update_fail_htlc" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_update_fail_htlc" class="fnname">handle_update_fail_htlc</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.UpdateFailHTLC.html" title="struct lightning::ln::msgs::UpdateFailHTLC">UpdateFailHTLC</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>update_fail_htlc</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_update_fail_malformed_htlc" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6111-6114">source</a><a href="#method.handle_update_fail_malformed_htlc" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_update_fail_malformed_htlc" class="fnname">handle_update_fail_malformed_htlc</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.UpdateFailMalformedHTLC.html" title="struct lightning::ln::msgs::UpdateFailMalformedHTLC">UpdateFailMalformedHTLC</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>update_fail_malformed_htlc</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_commitment_signed" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6116-6119">source</a><a href="#method.handle_commitment_signed" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_commitment_signed" class="fnname">handle_commitment_signed</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.CommitmentSigned.html" title="struct lightning::ln::msgs::CommitmentSigned">CommitmentSigned</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>commitment_signed</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_revoke_and_ack" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6121-6124">source</a><a href="#method.handle_revoke_and_ack" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_revoke_and_ack" class="fnname">handle_revoke_and_ack</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.RevokeAndACK.html" title="struct lightning::ln::msgs::RevokeAndACK">RevokeAndACK</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>revoke_and_ack</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_update_fee" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6126-6129">source</a><a href="#method.handle_update_fee" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_update_fee" class="fnname">handle_update_fee</a>(&amp;self, counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>, msg: &amp;<a class="struct" href="../msgs/struct.UpdateFee.html" title="struct lightning::ln::msgs::UpdateFee">UpdateFee</a>)</h4></section></summary><div class='docblock'>Handle an incoming <code>update_fee</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_announcement_signatures" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6131-6134">source</a><a href="#method.handle_announcement_signatures" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_announcement_signatures" class="fnname">handle_announcement_signatures</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.AnnouncementSignatures.html" title="struct lightning::ln::msgs::AnnouncementSignatures">AnnouncementSignatures</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>announcement_signatures</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_channel_update" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6136-6144">source</a><a href="#method.handle_channel_update" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_channel_update" class="fnname">handle_channel_update</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.ChannelUpdate.html" title="struct lightning::ln::msgs::ChannelUpdate">ChannelUpdate</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>channel_update</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_channel_reestablish" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6146-6149">source</a><a href="#method.handle_channel_reestablish" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_channel_reestablish" class="fnname">handle_channel_reestablish</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: &amp;<a class="struct" href="../msgs/struct.ChannelReestablish.html" title="struct lightning::ln::msgs::ChannelReestablish">ChannelReestablish</a><br>)</h4></section></summary><div class='docblock'>Handle an incoming <code>channel_reestablish</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.peer_disconnected" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6151-6208">source</a><a href="#method.peer_disconnected" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.peer_disconnected" class="fnname">peer_disconnected</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;no_connection_possible: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.bool.html">bool</a><br>)</h4></section></summary><div class='docblock'>Indicates a connection to the peer failed/an existing connection was lost. If no connection
is believed to be possible in the future (eg they’re sending us messages we don’t
understand or indicate they require unknown feature bits), <code>no_connection_possible</code> is set
and any outstanding channels should be failed. <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.peer_disconnected">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.peer_connected" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6210-6273">source</a><a href="#method.peer_connected" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.peer_connected" class="fnname">peer_connected</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;init_msg: &amp;<a class="struct" href="../msgs/struct.Init.html" title="struct lightning::ln::msgs::Init">Init</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;</h4></section></summary><div class='docblock'>Handle a peer reconnecting, possibly generating <code>channel_reestablish</code> message(s). <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.peer_connected">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.handle_error" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6275-6313">source</a><a href="#method.handle_error" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.handle_error" class="fnname">handle_error</a>(&amp;self, counterparty_node_id: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>, msg: &amp;<a class="struct" href="../msgs/struct.ErrorMessage.html" title="struct lightning::ln::msgs::ErrorMessage">ErrorMessage</a>)</h4></section></summary><div class='docblock'>Handle an incoming <code>error</code> message from the given peer.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.provided_node_features" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6315-6317">source</a><a href="#method.provided_node_features" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.provided_node_features" class="fnname">provided_node_features</a>(&amp;self) -&gt; <a class="type" href="../features/type.NodeFeatures.html" title="type lightning::ln::features::NodeFeatures">NodeFeatures</a></h4></section></summary><div class='docblock'>Gets the node feature flags which this handler itself supports. All available handlers are
queried similarly and their feature flags are OR’d together to form the <a href="../features/type.NodeFeatures.html" title="NodeFeatures"><code>NodeFeatures</code></a>
which are broadcasted in our <a href="../msgs/struct.NodeAnnouncement.html" title="NodeAnnouncement"><code>NodeAnnouncement</code></a> message. <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.provided_node_features">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.provided_init_features" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6319-6321">source</a><a href="#method.provided_init_features" class="anchor"></a><h4 class="code-header">fn <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.provided_init_features" class="fnname">provided_init_features</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;_their_init_features: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a><br>) -&gt; <a class="type" href="../features/type.InitFeatures.html" title="type lightning::ln::features::InitFeatures">InitFeatures</a></h4></section></summary><div class='docblock'>Gets the init feature flags which should be sent to the given peer. All available handlers
are queried similarly and their feature flags are OR’d together to form the <a href="../features/type.InitFeatures.html" title="InitFeatures"><code>InitFeatures</code></a>
which are sent in our <a href="../msgs/struct.Init.html" title="Init"><code>Init</code></a> message. <a href="../msgs/trait.ChannelMessageHandler.html#tymethod.provided_init_features">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Confirm-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5716-5807">source</a><a href="#impl-Confirm-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="trait" href="../../chain/trait.Confirm.html" title="trait lightning::chain::Confirm">Confirm</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.transactions_confirmed" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5727-5744">source</a><a href="#method.transactions_confirmed" class="anchor"></a><h4 class="code-header">fn <a href="../../chain/trait.Confirm.html#tymethod.transactions_confirmed" class="fnname">transactions_confirmed</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;header: &amp;<a class="struct" href="../../../bitcoin/blockdata/block/struct.BlockHeader.html" title="struct bitcoin::blockdata::block::BlockHeader">BlockHeader</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;txdata: &amp;<a class="type" href="../../chain/transaction/type.TransactionData.html" title="type lightning::chain::transaction::TransactionData">TransactionData</a>&lt;'_&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;height: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a><br>)</h4></section></summary><div class='docblock'>Notifies LDK of transactions confirmed in a block with a given header and height. <a href="../../chain/trait.Confirm.html#tymethod.transactions_confirmed">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.best_block_updated" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5746-5781">source</a><a href="#method.best_block_updated" class="anchor"></a><h4 class="code-header">fn <a href="../../chain/trait.Confirm.html#tymethod.best_block_updated" class="fnname">best_block_updated</a>(&amp;self, header: &amp;<a class="struct" href="../../../bitcoin/blockdata/block/struct.BlockHeader.html" title="struct bitcoin::blockdata::block::BlockHeader">BlockHeader</a>, height: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a>)</h4></section></summary><div class='docblock'>Notifies LDK of an update to the best header connected at the given height. <a href="../../chain/trait.Confirm.html#tymethod.best_block_updated">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_relevant_txids" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5783-5795">source</a><a href="#method.get_relevant_txids" class="anchor"></a><h4 class="code-header">fn <a href="../../chain/trait.Confirm.html#tymethod.get_relevant_txids" class="fnname">get_relevant_txids</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;(<a class="struct" href="../../../bitcoin/hash_types/newtypes/struct.Txid.html" title="struct bitcoin::hash_types::newtypes::Txid">Txid</a>, <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../bitcoin/hash_types/newtypes/struct.BlockHash.html" title="struct bitcoin::hash_types::newtypes::BlockHash">BlockHash</a>&gt;)&gt;<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;</span><code class="content"><span class="where fmt-newline">impl&lt;A&gt; <a class="trait" href="../../io/trait.Write.html" title="trait lightning::io::Write">Write</a> for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;A: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/alloc/trait.Allocator.html" title="trait core::alloc::Allocator">Allocator</a>,</span></span></code></span></span></span></span></h4></section></summary><div class='docblock'>Returns transactions that must be monitored for reorganization out of the chain along
with the hash of the block as part of which it had been previously confirmed. <a href="../../chain/trait.Confirm.html#tymethod.get_relevant_txids">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.transaction_unconfirmed" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5797-5806">source</a><a href="#method.transaction_unconfirmed" class="anchor"></a><h4 class="code-header">fn <a href="../../chain/trait.Confirm.html#tymethod.transaction_unconfirmed" class="fnname">transaction_unconfirmed</a>(&amp;self, txid: &amp;<a class="struct" href="../../../bitcoin/hash_types/newtypes/struct.Txid.html" title="struct bitcoin::hash_types::newtypes::Txid">Txid</a>)</h4></section></summary><div class='docblock'>Notifies LDK of a transaction that is no longer confirmed as result of a chain reorganization. <a href="../../chain/trait.Confirm.html#tymethod.transaction_unconfirmed">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-EventsProvider-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5637-5674">source</a><a href="#impl-EventsProvider-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="trait" href="../../util/events/trait.EventsProvider.html" title="trait lightning::util::events::EventsProvider">EventsProvider</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.process_pending_events" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5652-5673">source</a><a href="#method.process_pending_events" class="anchor"></a><h4 class="code-header">fn <a href="../../util/events/trait.EventsProvider.html#tymethod.process_pending_events" class="fnname">process_pending_events</a>&lt;H:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt;(&amp;self, handler: H)<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;H::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/events/trait.EventHandler.html" title="trait lightning::util::events::EventHandler">EventHandler</a>,</span></h4></section></summary><div class="docblock"><p>Processes events that must be periodically handled.</p>
<p>An <a href="../../util/events/trait.EventHandler.html" title="EventHandler"><code>EventHandler</code></a> may safely call back to the provider in order to handle an event.
However, it must not call <a href="../../util/ser/trait.Writeable.html#tymethod.write" title="Writeable::write"><code>Writeable::write</code></a> as doing so would result in a deadlock.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Listen-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5676-5714">source</a><a href="#impl-Listen-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="trait" href="../../chain/trait.Listen.html" title="trait lightning::chain::Listen">Listen</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.filtered_block_connected" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5687-5698">source</a><a href="#method.filtered_block_connected" class="anchor"></a><h4 class="code-header">fn <a href="../../chain/trait.Listen.html#tymethod.filtered_block_connected" class="fnname">filtered_block_connected</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;header: &amp;<a class="struct" href="../../../bitcoin/blockdata/block/struct.BlockHeader.html" title="struct bitcoin::blockdata::block::BlockHeader">BlockHeader</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;txdata: &amp;<a class="type" href="../../chain/transaction/type.TransactionData.html" title="type lightning::chain::transaction::TransactionData">TransactionData</a>&lt;'_&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;height: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a><br>)</h4></section></summary><div class='docblock'>Notifies the listener that a block was added at the given height, with the transaction data
possibly filtered. <a href="../../chain/trait.Listen.html#tymethod.filtered_block_connected">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.block_disconnected" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5700-5713">source</a><a href="#method.block_disconnected" class="anchor"></a><h4 class="code-header">fn <a href="../../chain/trait.Listen.html#tymethod.block_disconnected" class="fnname">block_disconnected</a>(&amp;self, header: &amp;<a class="struct" href="../../../bitcoin/blockdata/block/struct.BlockHeader.html" title="struct bitcoin::blockdata::block::BlockHeader">BlockHeader</a>, height: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a>)</h4></section></summary><div class='docblock'>Notifies the listener that a block was removed at the given height.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.block_connected" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/mod.rs.html#101-104">source</a><a href="#method.block_connected" class="anchor"></a><h4 class="code-header">fn <a href="../../chain/trait.Listen.html#method.block_connected" class="fnname">block_connected</a>(&amp;self, block: &amp;<a class="struct" href="../../../bitcoin/blockdata/block/struct.Block.html" title="struct bitcoin::blockdata::block::Block">Block</a>, height: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u32.html">u32</a>)</h4></section></summary><div class='docblock'>Notifies the listener that a block was added at the given height.</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-MessageSendEventsProvider-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5573-5635">source</a><a href="#impl-MessageSendEventsProvider-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="trait" href="../../util/events/trait.MessageSendEventsProvider.html" title="trait lightning::util::events::MessageSendEventsProvider">MessageSendEventsProvider</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_and_clear_pending_msg_events" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#5597-5634">source</a><a href="#method.get_and_clear_pending_msg_events" class="anchor"></a><h4 class="code-header">fn <a href="../../util/events/trait.MessageSendEventsProvider.html#tymethod.get_and_clear_pending_msg_events" class="fnname">get_and_clear_pending_msg_events</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="enum" href="../../util/events/enum.MessageSendEvent.html" title="enum lightning::util::events::MessageSendEvent">MessageSendEvent</a>&gt;<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;</span><code class="content"><span class="where fmt-newline">impl&lt;A&gt; <a class="trait" href="../../io/trait.Write.html" title="trait lightning::io::Write">Write</a> for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;A: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/alloc/trait.Allocator.html" title="trait core::alloc::Allocator">Allocator</a>,</span></span></code></span></span></span></span></h4></section></summary><div class="docblock"><p>Returns <code>MessageSendEvent</code>s strictly ordered per-peer, in the order they were generated.
The returned array will contain <code>MessageSendEvent</code>s for different peers if
<code>MessageSendEvent</code>s to more than one peer exists, but <code>MessageSendEvent</code>s to the same peer
is always placed next to each other.</p>
<p>Note that that while <code>MessageSendEvent</code>s are strictly ordered per-peer, the peer order for
the chunks of <code>MessageSendEvent</code>s for different peers is random. I.e. if the array contains
<code>MessageSendEvent</code>s  for both <code>node_a</code> and <code>node_b</code>, the <code>MessageSendEvent</code>s for <code>node_a</code>
will randomly be placed first or last in the returned array.</p>
<p>Note that even though <code>BroadcastChannelAnnouncement</code> and <code>BroadcastChannelUpdate</code>
<code>MessageSendEvent</code>s are intended to be broadcasted to all peers, they will be pleaced among
the <code>MessageSendEvent</code>s to the specific peer they were generated under.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Writeable-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6767-6945">source</a><a href="#impl-Writeable-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, ES:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, NS:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, SP:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, F:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>, L:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt; <a class="trait" href="../../util/ser/trait.Writeable.html" title="trait lightning::util::ser::Writeable">Writeable</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;M::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/trait.Watch.html" title="trait lightning::chain::Watch">Watch</a>&lt;&lt;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.BroadcasterInterface.html" title="trait lightning::chain::chaininterface::BroadcasterInterface">BroadcasterInterface</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;ES::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.EntropySource.html" title="trait lightning::chain::keysinterface::EntropySource">EntropySource</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../chain/chaininterface/trait.FeeEstimator.html" title="trait lightning::chain::chaininterface::FeeEstimator">FeeEstimator</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../routing/router/trait.Router.html" title="trait lightning::routing::router::Router">Router</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a>: <a class="trait" href="../../util/logger/trait.Logger.html" title="trait lightning::util::logger::Logger">Logger</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.write" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/ln/channelmanager.rs.html#6778-6944">source</a><a href="#method.write" class="anchor"></a><h4 class="code-header">fn <a href="../../util/ser/trait.Writeable.html#tymethod.write" class="fnname">write</a>&lt;W:&nbsp;<a class="trait" href="../../util/ser/trait.Writer.html" title="trait lightning::util::ser::Writer">Writer</a>&gt;(&amp;self, writer: <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.reference.html">&amp;mut </a>W) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>, <a class="struct" href="../../io/struct.Error.html" title="struct lightning::io::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Writes <code>self</code> out to the given <a href="../../util/ser/trait.Writer.html" title="Writer"><code>Writer</code></a>.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.encode" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/util/ser.rs.html#191-195">source</a><a href="#method.encode" class="anchor"></a><h4 class="code-header">fn <a href="../../util/ser/trait.Writeable.html#method.encode" class="fnname">encode</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>&gt;<span class="notable-traits"><span class="notable-traits-tooltip">ⓘ<span class="notable-traits-tooltiptext"><span class="docblock"><span class="notable">Notable traits for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;</span><code class="content"><span class="where fmt-newline">impl&lt;A&gt; <a class="trait" href="../../io/trait.Write.html" title="trait lightning::io::Write">Write</a> for <a class="struct" href="https://doc.rust-lang.org/1.65.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>, A&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;A: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/alloc/trait.Allocator.html" title="trait core::alloc::Allocator">Allocator</a>,</span></span></code></span></span></span></span></h4></section></summary><div class='docblock'>Writes <code>self</code> out to a <code>Vec&lt;u8&gt;</code>.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.serialized_length" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/util/ser.rs.html#212-216">source</a><a href="#method.serialized_length" class="anchor"></a><h4 class="code-header">fn <a href="../../util/ser/trait.Writeable.html#method.serialized_length" class="fnname">serialized_length</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.usize.html">usize</a></h4></section></summary><div class='docblock'>Gets the length of this object after it has been serialized. This can be overridden to
optimize cases where we prepend an object with its length. <a href="../../util/ser/trait.Writeable.html#method.serialized_length">Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a href="#impl-RefUnwindSafe-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M, T, ES, NS, SP, F, R, L&gt; !<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;</h3></section><section id="impl-Send-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a href="#impl-Send-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M, T, ES, NS, SP, F, R, L&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;ES: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;M: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;SP as <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,</span></h3></section><section id="impl-Sync-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a href="#impl-Sync-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M, T, ES, NS, SP, F, R, L&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;ES: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;M: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;SP as <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a>,</span></h3></section><section id="impl-Unpin-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a href="#impl-Unpin-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M, T, ES, NS, SP, F, R, L&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;ES: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;L: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;M: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;NS: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;R: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;SP: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;SP as <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html" title="trait core::ops::deref::Deref">Deref</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/ops/deref/trait.Deref.html#associatedtype.Target" title="type core::ops::deref::Deref::Target">Target</a> as <a class="trait" href="../../chain/keysinterface/trait.SignerProvider.html" title="trait lightning::chain::keysinterface::SignerProvider">SignerProvider</a>&gt;::<a class="associatedtype" href="../../chain/keysinterface/trait.SignerProvider.html#associatedtype.Signer" title="type lightning::chain::keysinterface::SignerProvider::Signer">Signer</a>: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a>,</span></h3></section><section id="impl-UnwindSafe-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a href="#impl-UnwindSafe-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;M, T, ES, NS, SP, F, R, L&gt; !<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.ChannelManager.html" title="struct lightning::ln::channelmanager::ChannelManager">ChannelManager</a>&lt;M, T, ES, NS, SP, F, R, L&gt;</h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/any.rs.html#200">source</a><a href="#impl-Any-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/any.rs.html#201">source</a><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.65.0/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.65.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.65.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/borrow.rs.html#209">source</a><a href="#impl-Borrow%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.65.0/src/core/borrow.rs.html#211">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.65.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.65.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/borrow.rs.html#218">source</a><a href="#impl-BorrowMut%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.65.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.65.0/src/core/borrow.rs.html#219">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.65.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.65.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#559">source</a><a href="#impl-From%3CT%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#562">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.65.0/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#543">source</a><a href="#impl-Into%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#551">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.65.0/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/1.65.0/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#601">source</a><a href="#impl-TryFrom%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#607">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#586">source</a><a href="#impl-TryInto%3CU%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/1.65.0/src/core/convert/mod.rs.html#592">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/1.65.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-VZip%3CV%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="impl has-srclink"><a class="srclink rightside" href="../../../src/ppv_lite86/types.rs.html#221">source</a><a href="#impl-VZip%3CV%3E-for-ChannelManager%3CM%2C%20T%2C%20ES%2C%20NS%2C%20SP%2C%20F%2C%20R%2C%20L%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;V, T&gt; <a class="trait" href="../../../ppv_lite86/types/trait.VZip.html" title="trait ppv_lite86::types::VZip">VZip</a>&lt;V&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;V: <a class="trait" href="../../../ppv_lite86/types/trait.MultiLane.html" title="trait ppv_lite86::types::MultiLane">MultiLane</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><section id="method.vzip" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../../src/ppv_lite86/types.rs.html#226">source</a><a href="#method.vzip" class="anchor"></a><h4 class="code-header">fn <a href="../../../ppv_lite86/types/trait.VZip.html#tymethod.vzip" class="fnname">vzip</a>(self) -&gt; V</h4></section></div></details></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="lightning" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>