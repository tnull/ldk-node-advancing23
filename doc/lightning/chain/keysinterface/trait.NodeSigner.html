<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait that can handle cryptographic operations at the scope level of a node."><meta name="keywords" content="rust, rustlang, rust-lang, NodeSigner"><title>NodeSigner in lightning::chain::keysinterface - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../../normalize.css"><link rel="stylesheet" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../../ayu.css" disabled><link rel="stylesheet" href="../../../dark.css" disabled><link rel="stylesheet" href="../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../main.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../lightning/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../lightning/index.html"><div class="logo-container"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">NodeSigner</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.ecdh">ecdh</a></li><li><a href="#tymethod.get_inbound_payment_key_material">get_inbound_payment_key_material</a></li><li><a href="#tymethod.get_node_id">get_node_id</a></li><li><a href="#tymethod.sign_gossip_message">sign_gossip_message</a></li><li><a href="#tymethod.sign_invoice">sign_invoice</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In lightning::chain::keysinterface</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../lightning/index.html"><img class="rust-logo" src="../../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Trait <a href="../../index.html">lightning</a>::<wbr><a href="../index.html">chain</a>::<wbr><a href="index.html">keysinterface</a>::<wbr><a class="trait" href="#">NodeSigner</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../../src/lightning/chain/keysinterface.rs.html#452-505">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait NodeSigner {
    fn <a href="#tymethod.get_inbound_payment_key_material" class="fnname">get_inbound_payment_key_material</a>(&amp;self) -&gt; <a class="struct" href="struct.KeyMaterial.html" title="struct lightning::chain::keysinterface::KeyMaterial">KeyMaterial</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_node_id" class="fnname">get_node_id</a>(&amp;self, recipient: <a class="enum" href="enum.Recipient.html" title="enum lightning::chain::keysinterface::Recipient">Recipient</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.ecdh" class="fnname">ecdh</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recipient: <a class="enum" href="enum.Recipient.html" title="enum lightning::chain::keysinterface::Recipient">Recipient</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other_key: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tweak: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../../../secp256k1/scalar/struct.Scalar.html" title="struct secp256k1::scalar::Scalar">Scalar</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/ecdh/struct.SharedSecret.html" title="struct secp256k1::ecdh::SharedSecret">SharedSecret</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.sign_invoice" class="fnname">sign_invoice</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hrp_bytes: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invoice_data: &amp;[<a class="struct" href="../../../bech32/struct.u5.html" title="struct bech32::u5">u5</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recipient: <a class="enum" href="enum.Recipient.html" title="enum lightning::chain::keysinterface::Recipient">Recipient</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/ecdsa/recovery/struct.RecoverableSignature.html" title="struct secp256k1::ecdsa::recovery::RecoverableSignature">RecoverableSignature</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.sign_gossip_message" class="fnname">sign_gossip_message</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="enum" href="../../ln/msgs/enum.UnsignedGossipMessage.html" title="enum lightning::ln::msgs::UnsignedGossipMessage">UnsignedGossipMessage</a>&lt;'_&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/ecdsa/struct.Signature.html" title="struct secp256k1::ecdsa::Signature">Signature</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;;
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait that can handle cryptographic operations at the scope level of a node.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.get_inbound_payment_key_material" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/keysinterface.rs.html#465">source</a><h4 class="code-header">fn <a href="#tymethod.get_inbound_payment_key_material" class="fnname">get_inbound_payment_key_material</a>(&amp;self) -&gt; <a class="struct" href="struct.KeyMaterial.html" title="struct lightning::chain::keysinterface::KeyMaterial">KeyMaterial</a></h4></div></summary><div class="docblock"><p>Get secret key material as bytes for use in encrypting and decrypting inbound payment data.</p>
<p>If the implementor of this trait supports <a href="struct.PhantomKeysManager.html">phantom node payments</a>, then every node that is
intended to be included in the phantom invoice route hints must return the same value from
this method.</p>
<p>This method must return the same value each time it is called.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_node_id" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/keysinterface.rs.html#473">source</a><h4 class="code-header">fn <a href="#tymethod.get_node_id" class="fnname">get_node_id</a>(&amp;self, recipient: <a class="enum" href="enum.Recipient.html" title="enum lightning::chain::keysinterface::Recipient">Recipient</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Get node id based on the provided <a href="enum.Recipient.html" title="Recipient"><code>Recipient</code></a>.</p>
<p>This method must return the same value each time it is called with a given <a href="enum.Recipient.html" title="Recipient"><code>Recipient</code></a>
parameter.</p>
<p>Errors if the <a href="enum.Recipient.html" title="Recipient"><code>Recipient</code></a> variant is not supported by the implementation.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.ecdh" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/keysinterface.rs.html#483">source</a><h4 class="code-header">fn <a href="#tymethod.ecdh" class="fnname">ecdh</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;recipient: <a class="enum" href="enum.Recipient.html" title="enum lightning::chain::keysinterface::Recipient">Recipient</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;other_key: &amp;<a class="struct" href="../../../secp256k1/key/struct.PublicKey.html" title="struct secp256k1::key::PublicKey">PublicKey</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;tweak: <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../../../secp256k1/scalar/struct.Scalar.html" title="struct secp256k1::scalar::Scalar">Scalar</a>&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/ecdh/struct.SharedSecret.html" title="struct secp256k1::ecdh::SharedSecret">SharedSecret</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Gets the ECDH shared secret of our node secret and <code>other_key</code>, multiplying by <code>tweak</code> if
one is provided. Note that this tweak can be applied to <code>other_key</code> instead of our node
secret, though this is less efficient.</p>
<p>Note that if this fails while attempting to forward an HTLC, LDK will panic. The error
should be resolved to allow LDK to resume forwarding HTLCs.</p>
<p>Errors if the <a href="enum.Recipient.html" title="Recipient"><code>Recipient</code></a> variant is not supported by the implementation.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.sign_invoice" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/keysinterface.rs.html#496">source</a><h4 class="code-header">fn <a href="#tymethod.sign_invoice" class="fnname">sign_invoice</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;hrp_bytes: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;invoice_data: &amp;[<a class="struct" href="../../../bech32/struct.u5.html" title="struct bech32::u5">u5</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;recipient: <a class="enum" href="enum.Recipient.html" title="enum lightning::chain::keysinterface::Recipient">Recipient</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/ecdsa/recovery/struct.RecoverableSignature.html" title="struct secp256k1::ecdsa::recovery::RecoverableSignature">RecoverableSignature</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Sign an invoice.</p>
<p>By parameterizing by the raw invoice bytes instead of the hash, we allow implementors of
this trait to parse the invoice and make sure they’re signing what they expect, rather than
blindly signing the hash.</p>
<p>The <code>hrp_bytes</code> are ASCII bytes, while the <code>invoice_data</code> is base32.</p>
<p>The secret key used to sign the invoice is dependent on the <a href="enum.Recipient.html" title="Recipient"><code>Recipient</code></a>.</p>
<p>Errors if the <a href="enum.Recipient.html" title="Recipient"><code>Recipient</code></a> variant is not supported by the implementation.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.sign_gossip_message" class="method has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/keysinterface.rs.html#504">source</a><h4 class="code-header">fn <a href="#tymethod.sign_gossip_message" class="fnname">sign_gossip_message</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;msg: <a class="enum" href="../../ln/msgs/enum.UnsignedGossipMessage.html" title="enum lightning::ln::msgs::UnsignedGossipMessage">UnsignedGossipMessage</a>&lt;'_&gt;<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.65.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../../secp256k1/ecdsa/struct.Signature.html" title="struct secp256k1::ecdsa::Signature">Signature</a>, <a class="primitive" href="https://doc.rust-lang.org/1.65.0/std/primitive.unit.html">()</a>&gt;</h4></div></summary><div class="docblock"><p>Sign a gossip message.</p>
<p>Note that if this fails, LDK may panic and the message will not be broadcast to the network
or a possible channel counterparty. If LDK panics, the error should be resolved to allow the
message to be broadcast, as otherwise it may prevent one from receiving funds over the
corresponding channel.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><section id="impl-NodeSigner-for-KeysManager" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/keysinterface.rs.html#1258-1294">source</a><a href="#impl-NodeSigner-for-KeysManager" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a> for <a class="struct" href="struct.KeysManager.html" title="struct lightning::chain::keysinterface::KeysManager">KeysManager</a></h3></section><section id="impl-NodeSigner-for-PhantomKeysManager" class="impl has-srclink"><a class="srclink rightside" href="../../../src/lightning/chain/keysinterface.rs.html#1366-1401">source</a><a href="#impl-NodeSigner-for-PhantomKeysManager" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="trait.NodeSigner.html" title="trait lightning::chain::keysinterface::NodeSigner">NodeSigner</a> for <a class="struct" href="struct.PhantomKeysManager.html" title="struct lightning::chain::keysinterface::PhantomKeysManager">PhantomKeysManager</a></h3></section></div><script src="../../../implementors/lightning/chain/keysinterface/trait.NodeSigner.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-current-crate="lightning" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>